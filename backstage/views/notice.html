<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>公告</title>
    <link rel="stylesheet" href="../assets/less/base.css" type="text/css">
    <link rel="stylesheet" href="../assets/less/index.css" type="text/css">
    <link rel="stylesheet" href="../assets/lib/font-awesome/css/font-awesome.css">
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css">

    <style>
        select {
            background-color: rgba(255, 255, 255, 0.9);
            width: 100%;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
            height: 3rem;
            outline: none;
        }
        
        select:disabled {
            color: rgba(0, 0, 0, 0.3);
        }
        
        .header ul li a {
            outline: none;
            cursor: pointer;
        }
        
        .pagination li {
            cursor: pointer;
        }
        
        .disable {
            pointer-events: none;
        }
    </style>

</head>

<body>
    <!-- 左边的侧边栏 -->
    <div class="aside" id="aside">
        <!-- 左上部分的用户信息 -->
        <div class="profile">
            <div class="avatar" id="aa">
                <img src="../uploader/1.jpg" alt="" class='img-circle'>
            </div>
            <h5 id="usersName"></h5>
        </div>

        <!--左下部分的导航-->
        <div class="menu">
            <ul>
                <li><a href="./personnel.html">权限管理</a></li>
                <li><a href="./userControl.html">用户管理</a></li>
                <li style="display: none;"><a href="./operation.html">业务管理</a></li>
                <li>
                    <a class="slide" style="cursor: pointer;">业务管理<span class='arrow fa fa-angle-right pull-right'></span></a>
                    <ul style="display: none;" id="show" class="xz">
                        <li><a href="./operation.html">就管中心</a> </li>
                        <li><a href="./operation.html">社保中心</a> </li>
                        <li><a href="./operation.html">劳动监察</a> </li>
                        <li><a href="./operation.html">仲裁院</a> </li>
                        <li><a href="./operation.html">人事处</a> </li>
                    </ul>
                </li>
                <li>
                    <a class="slide" style="cursor: pointer;">信息管理<span class='arrow fa fa-angle-right pull-right'></span></a>
                    <ul style="display: none;" id="show" class="xz">
                        <li><a href="./notice.html">公告</a> </li>
                        <li><a href="./commonProblems.html">常见问题</a> </li>
                        <li><a href="./guide.html">办事指南</a> </li>
                        <li>
                            <a href="./query.html">信息录入</a>
                        </li>
                        <li>
                            <a href="./datafill.html">数据录入</a>
                        </li>
                    </ul>
                </li>
                <li><a href="./DataDisplay2.html">数据报表</a></li>
                <li><a href="./systemMaintenance.html">系统维护</a></li>
            </ul>
        </div>
    </div>
    <!-- 右边主体部分 -->
    <div class="main">
        <!-- 右边上部分工具部分 -->
        <div class="header">
            <!-- 导航条部分 -->
            <nav class="navbar navbar-default">
                <div class="container-fluid">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <a class="navbar-brand" href="javascript:;"><span class='fa fa-navicon'></span></a>
                    </div>

                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                        <ul class="nav navbar-nav navbar-right">
                            <li>
                                <a data-toggle="modal" data-target="#personalInformation"> <span class='fa fa-user-circle'></span> 个人中心</a>
                            </li>
                            <li><a data-toggle="modal" data-target="#changePassword"><span class='fa fa-key fa-fw'></span>修改密码</a></li>
                            <li><a data-toggle="modal" data-target="#logOut"><span class='fa fa-sign-out'></span>退出</a></li>
                        </ul>
                    </div>
                    <!-- /.navbar-collapse -->
                </div>
                <!-- /.container-fluid -->
            </nav>

        </div>

        <!-- 右边下部分 ，网站的主体页面-->
        <div class="body">
            <!-- 面包屑导航 -->
            <ol class="breadcrumb">
                <li>信息管理</li>
                <li>公告</li>
            </ol>
            <!-- 面板，搜索框与表格 -->
            <div class="panel panel-default">
                <div class="panel-body" style="margin-top: 15px;">
                    <!-- 搜索框 -->
                    <div class="col-md-6">
                        <form class="form-inline">
                            <div class="form-group">
                                <label>公告查询：</label>
                            </div>
                            <div class="input-group input-group-sm">
                                <input type="text" placeholder="发布时间" id="releaseTime" class="form-control laydate-icon">
                                <span class="input-group-btn">
                                    <button class="btn btn-success" type="button" id="queryNotice" style="outline: none;">搜索</button>
                                </span>
                            </div>
                            <input type="button" class='btn btn-success btn-sm' data-toggle="modal" data-target="#myModal" style="outline: none;" onclick="myModal()" value="添加公告">
                        </form>

                    </div>
                </div>
                <div class="panel-body" style="margin-top: 15px;">
                    <!-- 表格 -->
                    <table class="table table-bordered table-hover">
                        <thead>
                            <th>编号</th>
                            <th>标题</th>
                            <th>内容</th>
                            <th>备注</th>
                            <th>作者</th>
                            <th>上传时间</th>
                            <th>操作</th>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                    <div class="row">
                        <nav class="page col-md-4 col-md-offset-8" aria-label="Page navigation">
                            <ul class="pagination" style="margin: 40px -240px;">
                                <li id="fristPage">
                                    <a href="#" aria-label="Previous">
                                        <span aria-hidden="true">首页</span>
                                    </a>
                                </li>
                                <li id="previous">
                                    <a href="#" aria-label="Previous">
                                        <span aria-hidden="true">上一页</span>
                                    </a>
                                </li>
                                <li id="next">
                                    <a href="#" aria-label="Next">
                                        <span aria-hidden="true">下一页</span>
                                    </a>
                                </li>
                                <li id="lastPage">
                                    <a href="#" aria-label="Next">
                                        <span aria-hidden="true">尾页</span>
                                    </a>
                                </li>
                            </ul>
                            <div id="" style="float: right; margin: 40px;">
                                <span>跳转到</span>
                                <input type="number" name="" id="toPage" value="" style="width: 40px;height: 25px;border-radius: 3px; text-align: center;" />
                                <span>页</span>
                                <button class="btn btn-primary btn-sm" id="jumpPage" style="margin-left: 10px; outline: none;">确定</button>
                            </div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 添加公告 -->
    <div class="modal fade" id="myModal" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="outline: none;"><span aria-hidden="true" onclick="closeNotice()">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">添加公告</h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal" id="addNotice">
                        <div class="form-group">
                            <label class="col-md-2" for="title">标题</label>
                            <div class="col-md-8">
                                <input type="text" class="form-control" id="title" name="addTitle" onblur="addCheckTitle()" placeholder="标题">
                            </div>
                            <span style="height: 34px; line-height: 34px; color: red;">*</span>
                            <span id="titlespan"></span>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2" for="content">内容</label>
                            <!-- <div class="col-md-6">
                                <textarea name="" id="content" cols="30" rows="10" placeholder="请填写内容" class="form-control"></textarea>
                            </div> -->
                            <div class="col-md-8">
                                <textarea id="textarea1" name="area3" style="width: 368px; height: 70px;">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2" for="note">备注</label>
                            <div class="col-md-8">
                                <input type="text" class="form-control" id="note" placeholder="备注">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" style="outline: none;" onclick="closeNotice()">关闭</button>
                    <button type="button" class="btn btn-primary save" style="outline: none;" id="addAccessory" data-dismiss="modal">保存</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 编辑 -->
    <div class="modal fade" id="editor" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="outline: none;"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">编辑公告</h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-md-2" for="title2">标题</label>
                            <div class="col-md-8">
                                <input type="text" class="form-control" id="title2" placeholder="标题" value="aaaaa" name="editorTitle" onblur="checkTitle()">
                            </div>
                            <span style="height: 34px; line-height: 34px; color: red;">*</span>
                            <span id="namespan"></span>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2" for="content2">内容</label>
                            <!-- <div class="col-md-6">
                                <textarea name="" id="content2" cols="30" rows="10" placeholder="请填写内容" class="form-control"></textarea>
                            </div> -->
                            <div class="col-md-8">
                                <textarea name="area3" id="textarea2" style="width: 368px; height: 70px;"></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2" for="note2">备注</label>
                            <div class="col-md-8">
                                <input type="text" class="form-control" id="note2" placeholder="备注">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" style="outline: none;">关闭</button>
                    <button type="button" class="btn btn-primary save" style="outline: none;" data-dismiss="modal" id="saves" onclick="saveNotice()">保存</button>
                </div>
            </div>
        </div>
    </div>

    <!-- delete -->
    <div class="modal fade" id="delete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="outline: none;"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">是否删除？</h4>
                </div>
                <div class="modal-body">
                    您是否确认删除本行数据？
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" style="outline: none;">取消</button>
                    <button type="button" class="btn btn-primary" data-dismiss="modal" style="outline: none;" onclick="sureDelete()">确认</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 个人信息 -->
    <div class="modal fade" id="personalInformation" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" style="outline: none;" class="close" data-dismiss="modal" aria-label="Close" onclick="closeWindow()" style="outline: none;"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">个人信息</h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal" id="information">
                        <div class="form-group">
                            <label class="col-md-2">账号</label>
                            <div class="col-md-6">
                                <input type="text" id="userId" disabled class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2">用户名</label>
                            <div class="col-md-6">
                                <input type="text" id="userName" disabled class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2">部门</label>
                            <div class="col-md-6">
                                <select name="" id="multiSelect" disabled>
                                    <option value="请选择">请选择</option>
                                    <option value="01">社保中心</option>
                                    <option value="02">就管中心</option>
                                    <option value="03">劳动监察</option>
                                    <option value="04">劳动人事争议仲裁院</option>
                                    <option value="05">人事处</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2">角色</label>
                            <div class="col-md-6">
                                <select name="" id="multiSelect2" disabled>
                                    <option value="请选择">请选择</option>
                                    <option value="0">管理员</option>
                                    <option value="1">普通用户</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2">手机号码</label>
                            <div class="col-md-6">
                                <input type="text" id="phone" disabled class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2">备注</label>
                            <div class="col-md-6">
                                <input type="text" id="remark" disabled class="form-control">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button style="outline: none;" type="button" class="btn btn-default" data-dismiss="modal" onclick="restoreSettings()" style="outline: none;">关闭</button>
                    <button style="outline: none;" type="button" class="btn btn-primary" id="informationEditor" onclick="myEditor()" style="outline: none;">编辑</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 退出登录 -->
    <div class="modal fade" id="logOut" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="outline: none;"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">退出登录</h4>
                </div>
                <div class="modal-body">
                    您是否确认退出此次登录？
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" style="outline: none;">取消</button>
                    <button type="button" class="btn btn-primary" style="outline: none;" onclick="exitLogon()">确认</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 修改密码 -->
    <div class="modal fade" id="changePassword" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="outline: none;"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">修改密码</h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal" id="formInformation">
                        <div class="form-group">
                            <label class="col-md-2">原密码</label>
                            <div class="col-md-6">
                                <input type="password" class="form-control" placeholder="原密码">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2">新密码</label>
                            <div class="col-md-6">
                                <input type="password" class="form-control" placeholder="新密码">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2">确认密码</label>
                            <div class="col-md-6">
                                <input type="password" class="form-control" placeholder="确认密码">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" style="outline: none;">关闭</button>
                    <button type="button" class="btn btn-primary" style="outline: none;" onclick="changePwd()">保存</button>
                </div>
            </div>
        </div>
    </div>

    <script src="../assets/js/jquery-1.10.2.js"></script>
    <script src='../assets/lib/bootstrap/dist/js/bootstrap.js'></script>
    <script src="../assets/js/index.js"></script>
    <script src="../assets/js/laydate.js"></script>
    <script src="../nicEdit.js"></script>
    <script src="../assets/js/sidebarAnimation.js"></script>
    <script src="../assets/js/jquery.cookie.js"></script>
    <script src="../assets/js/common.js"></script>
    <script src="../assets/js/domainName.js"></script>
    <script src="../assets/js/info.js"></script>
    <script src="../assets/js/cookie.js"></script>
    <script src="../assets/js/navigationList.js"></script>
    <script type="text/javascript">
        bkLib.onDomLoaded(function() {
            nicEditors.allTextAreas()
        });
    </script>
    <script>
        ! function() {
            laydate.skin('molv'); //切换皮肤，请查看skins下面皮肤库
        }();
        laydate({
            elem: '#releaseTime',
            max: laydate.now() //-1代表昨天，-2代表前天，以此类推
        });


        var pageIndex = 1,
            addCount = 0,
            totalPage = 0,
            lastPage = 0,
            annoTime;

        var publishPerson = userInfo.userCode;

        window.onload = function() {
            initAjax();
        }

        // 分页
        function page() {
            if (totalPage <= 6) {
                while (totalPage > 0) {
                    $('#previous').after('<li><a href="javascript:;" class="pageNo pageNo' + totalPage + '">' + totalPage + '</a></li>');
                    totalPage--
                }
            } else {
                if (pageIndex > 3 && totalPage - 2 >= pageIndex) {
                    $('#previous').after('<li><a href="javascript:;" class="pageNo pageNo' + (pageIndex - 2) + '">' + (pageIndex - 2) +
                        '</a></li><li><a href="javascript:;" class="pageNo pageNo' + (pageIndex - 1) + '">' + (pageIndex - 1) +
                        '</a></li><li><a href="javascript:;" class="pageNo pageNo' + (pageIndex) + '">' + pageIndex +
                        '</a></li><li><a href="javascript:;" class="pageNo pageNo' + (pageIndex + 1) + '">' + (pageIndex + 1) +
                        '</a></li><li><a href="javascript:;" class="pageNo pageNo' + (pageIndex + 2) + '">' + (pageIndex + 2) +
                        '</a></li>');
                } else if (pageIndex > 3 && totalPage - 2 < pageIndex) {
                    $('#previous').after('<li><a href="javascript:;" class="pageNo pageNo' + (totalPage - 4) + '">' + (totalPage - 4) +
                        '</a></li><li><a href="javascript:;" class="pageNo pageNo' + (totalPage - 3) + '">' + (totalPage - 3) +
                        '</a></li><li><a href="javascript:;" class="pageNo pageNo' + (totalPage - 2) + '">' + (totalPage - 2) +
                        '</a></li><li><a href="javascript:;" class="pageNo pageNo' + (totalPage - 1) + '">' + (totalPage - 1) +
                        '</a></li><li><a href="javascript:;" class="pageNo pageNo' + (totalPage) + '">' + totalPage +
                        '</a></li>');
                } else {
                    $('#previous').after('<li><a href="javascript:;" class="pageNo pageNo1">' + 1 +
                        '</a></li><li><a href="javascript:;" class="pageNo pageNo2">' + 2 +
                        '</a></li><li><a href="javascript:;" class="pageNo pageNo3">' + 3 +
                        '</a></li><li><a href="javascript:;" class="pageNo pageNo4">' + 4 +
                        '</a></li><li><a href="javascript:;" class="pageNo pageNo5">' + 5 +
                        '</a></li>');
                }
            }
            //获取当前页面的页码变色
            $('.pagination .pageNo' + pageIndex).css('background-color', '#ddd');
            if (pageIndex <= 0) {
                $('.pagination .pageNo1').css('background-color', '#ddd');
            }
            $('.pagination .pageNo').click(function() {
                pageIndex = parseInt($(this).text());
                addCount = pageIndex * 5 - 5;
                initAjax();
            })

        }

        // 初始化数据
        function initAjax() {
            nicEditors.findEditor('textarea1').getContent();
            var parameter = {
                    "pageIndex": pageIndex,
                    "recordCount": 5,
                    "criteria": {
                        "annoTime": annoTime
                    }
                }
                // console.log('parameter=', parameter);
            $.ajax({
                type: 'POST',
                url: ipAddress + '/content/queryNotice',
                data: JSON.stringify(parameter),
                contentType: 'application/json;charset=UTF-8',
                success: function(result) {
                    // console.log(result);
                    $('table:first thead').siblings().remove();
                    var html = '';
                    lastPage = result.totalPage;
                    totalPage = lastPage;
                    $('.pageNo').remove();
                    page();
                    if (lastPage != 0) {
                        if (pageIndex > lastPage) {
                            pageIndex = lastPage;
                            addCount -= 5;
                            initAjax();
                        }
                    }
                    for (var i = 0; i < result.data.length; i++) {
                        if (result.data[i].annoContent.length > 50) {
                            var content = result.data[i].annoContent;
                            var aa = content.replace(/<\/?.+?>/g, "");
                            var bb = aa.replace(/ /g, ""); // bb为得到后的内容
                            html += '<tr>' +
                                '<td>' + (i + 1 + addCount) +
                                '</td>' +
                                '<td style="width: 10%;">' + result.data[i].annoTitle +
                                '</td>' +
                                '<td style="width: 25%; word-break: break-all;">' + bb.substring(0, 20) + '...' +
                                '</td>' +
                                '<td>' + result.data[i].annoRemark +
                                '</td>' +
                                '<td>' + result.data[i].publishPerson +
                                '</td>' +
                                '<td>' + formatDateStr(result.data[i].annoTime) +
                                '</td>' +
                                '<td>' +
                                '<a class="btn btn-default" data-toggle="modal" data-target="#editor" style="outline: none;" onclick="myEditors(' + result.data[i].id + ')">编辑</a>' +
                                '<a class="btn btn-warning" data-toggle="modal" data-target="#delete" style="outline: none; margin-left: 5px;" onclick="myDelete(this,' + result.data[i].id + ')">删除</a>' +
                                '</td>' +
                                '</tr>'
                        } else {
                            html += '<tr>' +
                                '<td>' + (i + 1 + addCount) +
                                '</td>' +
                                '<td style="width: 10%;">' + result.data[i].annoTitle +
                                '</td>' +
                                '<td style="width: 25%; word-break: break-all;">' + result.data[i].annoContent +
                                '</td>' +
                                '<td>' + result.data[i].annoRemark +
                                '</td>' +
                                '<td>' + result.data[i].publishPerson +
                                '</td>' +
                                '<td>' + formatDateStr(result.data[i].annoTime) +
                                '</td>' +
                                '<td>' +
                                '<a class="btn btn-default" data-toggle="modal" data-target="#editor" style="outline: none;" onclick="myEditors(' + result.data[i].id + ')">编辑</a>' +
                                '<a class="btn btn-warning" data-toggle="modal" data-target="#delete" style="outline: none; margin-left: 5px;" onclick="myDelete(this,' + result.data[i].id + ')">删除</a>' +
                                '</td>' +
                                '</tr>'
                        }

                    }
                    $('table:first').append(html);
                },
                error: function() {
                    alert('失败')
                }
            })
        }

        // 跳转页数(搜索)
        $('#jumpPage').click(function() {
            var jumPage = $("#toPage").val();
            if (jumPage > 0) {
                jumPage = parseInt(jumPage);

                if (jumPage <= lastPage) {
                    pageIndex = jumPage;
                    addCount = pageIndex * 5 - 5;
                    initAjax();
                } else {
                    $("#toPage").val(lastPage);
                    pageIndex = lastPage;
                    addCount = pageIndex * 5 - 5;
                    initAjax();
                }
            } else {
                $("#toPage").val('1');
                pageIndex = 1;
                addCount = 0;
                initAjax();
            }
        })

        // 首页
        $('#fristPage').click(function() {
            pageIndex = 1;
            addCount = 0;
            initAjax();
        })

        // 尾页
        $('#lastPage').click(function() {
            pageIndex = lastPage;
            addCount = pageIndex * 5 - 5;
            initAjax();
        })

        // 上一页
        $('#previous').click(function() {
            if (pageIndex < 2) {
                alert('已经是第一页');
                addCount = 0;
                return
            } else {
                $('table:first thead').siblings().remove();
            }
            if (--pageIndex < 2) {
                pageIndex = 1;

            }
            addCount -= 5;
            initAjax();
        })

        // 下一页
        $('#next').click(function() {
            if (pageIndex == lastPage) {
                alert('已经是最后一页');
                return;
            } else {
                $('table:first thead').siblings().remove();
                addCount += 5;
            }
            ++pageIndex;
            initAjax();
        })
        $(function() {
            var flag = true;
            $('.navbar-brand').click(function() {
                if (flag) {
                    $("#aside").animate({
                        marginLeft: '-180px'
                    });
                    $(".main").animate({
                        marginLeft: '0px'
                    });
                    // $("#main", parent.document).animate({
                    //     marginLeft: '0px'
                    // });
                    flag = false;
                } else {
                    $("#aside").animate({
                        marginLeft: '0px'
                    });
                    $(".main").animate({
                        marginLeft: '180px'
                    });
                    // $("#main", parent.document).animate({
                    //     marginLeft: '180px'
                    // });
                    flag = true;
                }

            })
        })

        // 添加公告
        $('#addAccessory').click(function() {
            var content = nicEditors.findEditor('textarea1').getContent();
            var parameter = {
                    "annoTitle": $('#title').val(),
                    "annoContent": nicEditors.findEditor('textarea1').getContent(), // 获取富文本编辑器的值
                    "annoRemark": $('#note').val(),
                    "publishPerson": publishPerson
                }
                // console.log('parameter=', parameter);
            if ($.trim(content) == '' || $.trim(content) == null) {
                alert('内容不能为空')
            } else {
                $.ajax({
                    type: 'POST',
                    url: ipAddress + '/content/addNotice',
                    data: JSON.stringify(parameter),
                    contentType: 'application/json;charset=UTF-8',
                    success: function(result) {
                        // console.log('result=', result);
                        if (result) {
                            // alert('添加成功');
                            $('#title').val('');
                            $('#note').val('');
                            $('#titlespan').html('');
                            nicEditors.findEditor('textarea1').setContent('');
                            initAjax();
                        }
                    },
                    error: function() {
                        alert('失败')
                    }
                })
            }

        })

        // 关闭添加公告窗口
        function closeNotice() {
            document.getElementById('addNotice').reset();
            $('#titlespan').html('');
            nicEditors.findEditor('textarea1').setContent('');
        }


        // 公告条件查询
        $('#queryNotice').click(function() {
            annoTime = $('#releaseTime').val();
            pageIndex = 1;
            addCount = 0;
            initAjax();
        })


        // 编辑
        var editorId;

        function myEditors(obj) {
            editorId = obj;
            var parameter = {
                "id": obj
            }
            $.ajax({
                type: 'POST',
                url: ipAddress + '/content/detailNotice',
                data: JSON.stringify(parameter),
                contentType: 'application/json;charset=UTF-8',
                success: function(result) {
                    // console.log('myEditors=', result);
                    $('#title2').val(result.annoTitle);
                    nicEditors.findEditor('textarea2').setContent(result.annoContent);
                    $('#note2').val(result.annoRemark);
                },
                error: function() {
                    alert('失败')
                }
            })
        }

        // 保存
        function saveNotice() {
            var parameter = {
                    "annoTitle": $('#title2').val(),
                    "annoContent": nicEditors.findEditor('textarea2').getContent(), // 获取富文本编辑器的值
                    "annoRemark": $('#note2').val(),
                    "publishPerson": publishPerson,
                    "id": editorId
                }
                // console.log('parameter=', parameter);
            if (nicEditors.findEditor('textarea2').getContent() == '') {
                alert('修改失败,内容不能为空!');
            } else {
                $.ajax({
                    type: 'POST',
                    url: ipAddress + '/content/modifyNotice',
                    data: JSON.stringify(parameter),
                    contentType: 'application/json;charset=UTF-8',
                    success: function(result) {
                        // console.log('result=', result);
                        nicEditors.findEditor('textarea2').setContent('');
                        initAjax();
                    },
                    error: function() {
                        alert('失败')
                    }
                })
            }

        }

        var trId,
            trObj,
            removeId;

        // 删除
        function myDelete(obj, id) {
            removeId = id;
            trId = obj.parentNode.parentNode;
            trObj = trId.parentNode;
        }

        // 确认删除
        function sureDelete() {
            var parameter = {
                    "id": removeId
                }
                // console.log('myDelete parameter=', parameter);
            $.ajax({
                type: 'POST',
                url: ipAddress + '/content/deleteNotice',
                data: JSON.stringify(parameter),
                contentType: 'application/json;charset=UTF-8',
                success: function(result) {
                    // console.log('shanchu result=', result);
                    if (result) {
                        trObj.removeChild(trId);
                        alert('删除成功');
                        initAjax();
                    }
                },
                error: function() {
                    alert('失败')
                }
            })
        }
    </script>
</body>

</html>